---
const isDark = false;
const colors = isDark
	? {
			bg: "#2D2D2D",
			font: "#FFFFFF",
		}
	: {
			background: "#F0F0F0",
			font: "#333333",
		};
// const shouldMove = localStorage.getItLOGO_OFFOGO) === "1";
// const repeatCount = shouldMove ? "indefinite" : "1";
---

<svg
	id="top-left-logo"
	class="max-w-20 cursor-pointer"
	xmlns="http://www.w3.org/2000/svg"
	viewBox="0 0 19 4"
	style={{ backgroundColor: colors.bg }}
>
	<text
		x="0"
		y="0"
		dominant-baseline="hanging"
		font-family="Menlo, Monaco, 'Courier New', monospace"
		font-size="5"
		fill={colors.font}
	>
		JT.1&gt;
	</text>
	<!-- Cursor -->
	<rect x="17" y="0" width="1" height="5" fill={colors.font}>
		<animate
			attributeName="opacity"
			values="1;0;1"
			dur="1s"
			repeatCount="indefinite"></animate>
	</rect>
</svg>

<script>
	import { LOGO_ANI_OFF } from "@/consts";
	{
		const svg = document.getElementById("top-left-logo")!;
		if (!svg.onclick) {
			svg.onclick = () => {
				const isLogoAniOff = !!localStorage.getItem(LOGO_ANI_OFF);
				// console.log("onclick", isLogoAniOff);
				if (isLogoAniOff) localStorage.removeItem(LOGO_ANI_OFF);
				else localStorage.setItem(LOGO_ANI_OFF, "1");
				render();
			};
		}
		const render = () => {
			const isLogoAniOff = !!localStorage.getItem(LOGO_ANI_OFF);
			// console.log("render", isLogoAniOff);
			const ani = svg.querySelector("animate")!;
			ani.setAttribute("repeatCount", isLogoAniOff ? "0" : "indefinite");
			ani.beginElement();
		};
		render();
	}
</script>
